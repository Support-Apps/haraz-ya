<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×”×¨×–-×™×”</title>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Heebo', sans-serif; background: linear-gradient(135deg, #fff5f7 0%, #fce4ec 100%); color: #2d1b2e; padding: 12px; min-height: 100vh; }
        .container { max-width: 480px; margin: 0 auto; }
        .bsd { text-align: right; font-size: 0.8em; color: #8b7f8e; }
        h1 { font-size: 2em; color: #f48fb1; text-align: center; margin-bottom: 3px; }
        .subtitle { text-align: center; color: #8b7f8e; margin-bottom: 12px; font-size: 0.95em; }
        .inspiration-box { background: linear-gradient(135deg, #fff5f7, #fce4ec); border-radius: 12px; padding: 12px 15px; margin-bottom: 12px; text-align: center; border: 1px solid #f8bbd9; }
        .inspiration-text { font-size: 0.85em; color: #ad1457; font-weight: 500; opacity: 1; transition: opacity 0.8s ease-in-out; }
        .card { background: white; border-radius: 18px; padding: 15px; margin: 10px 0; box-shadow: 0 6px 20px rgba(244,143,177,0.2); border: 2px solid #ffe4e9; }
        .tabs { display: flex; gap: 3px; margin-bottom: 10px; flex-wrap: wrap; }
        .tab { flex: 1; padding: 8px 4px; border: none; border-radius: 10px; background: #ffe4e9; cursor: pointer; font-family: 'Heebo', sans-serif; font-weight: 600; font-size: 0.62em; color: #2d1b2e; min-width: 42px; }
        .tab.active { background: #f48fb1; color: white; }
        .section-title { color: #f48fb1; text-align: center; margin-bottom: 12px; font-size: 1.3em; font-weight: 700; }
        .plate-container { position: relative; width: 240px; height: 260px; margin: 10px auto; }
        .plate-labels { position: absolute; bottom: 0; width: 100%; display: flex; justify-content: center; gap: 5px; flex-wrap: wrap; }
        .plate-label { font-size: 0.6em; padding: 2px 5px; border-radius: 5px; }
        .veggies-label { background: rgba(152,216,200,0.4); }
        .protein-label { background: rgba(244,143,177,0.4); }
        .carbs-label { background: rgba(255,213,79,0.4); }
        .cat-sec { margin: 8px 0; padding: 8px; background: #fff5f7; border-radius: 10px; }
        .cat-title { font-weight: 600; margin-bottom: 6px; color: #f48fb1; cursor: pointer; font-size: 0.85em; }
        .cat-note { font-size: 0.7em; color: #888; margin-bottom: 5px; }
        .cat-items { display: flex; flex-wrap: wrap; gap: 3px; }
        .food-btn { padding: 4px 7px; border: 1px solid #f48fb1; border-radius: 8px; background: #fff0f3; color: #2d1b2e; font-family: 'Heebo', sans-serif; font-size: 0.65em; cursor: pointer; font-weight: 500; }
        .food-btn:active { background: #fce4ec; }
        .food-list { margin: 10px 0; max-height: 80px; overflow-y: auto; }
        .food-item { display: flex; justify-content: space-between; align-items: center; padding: 4px 8px; background: #fff5f7; border-radius: 6px; margin-bottom: 3px; font-size: 0.75em; }
        .rm-btn { background: #ffcdd2; border: none; border-radius: 50%; width: 18px; height: 18px; cursor: pointer; color: #c62828; font-size: 0.7em; }
        .btn { padding: 8px 14px; background: #f48fb1; border: none; border-radius: 8px; color: white; font-family: 'Heebo', sans-serif; font-weight: 600; cursor: pointer; font-size: 0.8em; margin: 3px; }
        .btn-small { padding: 5px 10px; font-size: 0.7em; }
        .btn-outline { background: white; color: #f48fb1; border: 1px solid #f48fb1; }
        .analysis { background: linear-gradient(135deg, #e8f5e9, #c8e6c9); border-radius: 10px; padding: 10px; margin: 10px 0; text-align: center; display: none; }
        .calories { font-size: 1.4em; font-weight: 700; color: #f48fb1; }
        .section { background: #fff5f7; border-radius: 10px; padding: 10px; margin: 10px 0; }
        .section h3 { color: #f48fb1; margin-bottom: 8px; font-size: 0.9em; }
        .input-grp { margin: 6px 0; }
        .input-grp label { display: block; margin-bottom: 3px; font-size: 0.8em; font-weight: 600; }
        .input-grp input, .input-grp textarea, .input-grp select { width: 100%; padding: 7px; border: 2px solid #ffe4e9; border-radius: 8px; font-family: 'Heebo', sans-serif; font-size: 0.9em; }
        .input-grp textarea { resize: vertical; min-height: 60px; }
        .result { background: linear-gradient(135deg, #e3f2fd, #bbdefb); border-radius: 8px; padding: 8px; margin: 6px 0; text-align: center; display: none; }
        .result-val { font-size: 1.4em; font-weight: 700; color: #1976d2; }
        .result-lbl { font-size: 0.75em; color: #666; }
        .tip { background: linear-gradient(135deg, #fff9c4, #fff59d); border-radius: 10px; padding: 10px; margin: 8px 0; border-right: 3px solid #ffd54f; position: relative; }
        .tip-title { font-weight: 700; color: #f57f17; margin-bottom: 4px; font-size: 0.85em; }
        .tip-text { font-size: 0.8em; }
        .recipe { background: white; border-radius: 10px; padding: 12px; margin: 10px 0; border: 1px solid #ffe4e9; }
        .recipe-title { font-weight: 600; color: #f48fb1; margin-bottom: 5px; font-size: 0.95em; }
        .recipe-cal { font-size: 0.75em; color: #98d8c8; font-weight: 600; margin-bottom: 8px; }
        .recipe-section { font-weight: 600; color: #666; font-size: 0.8em; margin: 8px 0 4px 0; }
        .recipe-text { font-size: 0.8em; line-height: 1.5; }
        .recipe-cat { display: inline-block; background: #f48fb1; color: white; padding: 2px 6px; border-radius: 5px; font-size: 0.65em; margin-bottom: 5px; }
        canvas { max-width: 100%; }
        .circles { display: flex; justify-content: center; gap: 12px; margin: 8px 0; }
        .circle { width: 60px; height: 60px; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; font-size: 0.8em; }
        .waist-c { background: linear-gradient(135deg, #ffccbc, #ff8a65); }
        .hip-c { background: linear-gradient(135deg, #b2dfdb, #4db6ac); }
        .water-tracker { display: flex; gap: 5px; flex-wrap: wrap; justify-content: center; margin: 10px 0; }
        .water-cup { width: 35px; height: 45px; border: 2px solid #64b5f6; border-radius: 0 0 8px 8px; cursor: pointer; display: flex; align-items: flex-end; justify-content: center; background: white; transition: all 0.3s; }
        .water-cup.filled { background: linear-gradient(to top, #64b5f6 100%, transparent 100%); }
        .water-cup span { font-size: 0.7em; margin-bottom: 2px; }
        .water-count { text-align: center; font-weight: 600; color: #1976d2; margin-top: 5px; }
        .cat-filter { display: flex; gap: 4px; flex-wrap: wrap; margin-bottom: 10px; }
        .cat-filter-btn { padding: 4px 8px; border: none; border-radius: 8px; background: #ffe4e9; color: #2d1b2e; font-size: 0.65em; cursor: pointer; font-family: 'Heebo', sans-serif; }
        .cat-filter-btn.active { background: #f48fb1; color: white; }
        .note-hint { font-size: 0.7em; color: #888; font-style: italic; margin: 5px 0; padding: 5px; background: #fff9c4; border-radius: 5px; }
        .meal-section { background: #fff5f7; border-radius: 10px; padding: 10px; margin: 8px 0; position: relative; }
        .meal-title { font-weight: 600; color: #f48fb1; font-size: 0.85em; margin-bottom: 5px; }
        .meal-items { min-height: 30px; font-size: 0.75em; color: #666; }
        .meal-delete { position: absolute; top: 8px; left: 8px; }
        .share-btns { display: flex; gap: 5px; flex-wrap: wrap; justify-content: center; margin: 10px 0; }
        .memo-note { background: #fffef0; border: 1px solid #f5f5dc; border-radius: 8px; padding: 10px; margin: 8px 0; position: relative; }
        .memo-note textarea { width: 100%; border: none; background: transparent; font-family: 'Heebo', sans-serif; font-size: 0.85em; resize: vertical; min-height: 150px; line-height: 1.8em; background-image: repeating-linear-gradient(transparent, transparent 1.7em, #e0e0e0 1.7em, #e0e0e0 1.75em); }
        .memo-note textarea:focus { outline: none; }
        .personal-item { background: #fff5f7; border-radius: 8px; padding: 8px; margin: 5px 0; font-size: 0.8em; display: flex; justify-content: space-between; align-items: flex-start; }
        .personal-item-content { flex: 1; }
        .chart-container { background: white; border-radius: 10px; padding: 15px; margin: 10px 0; }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 9999; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .modal-content { background: white; border-radius: 15px; padding: 20px; max-width: 95%; width: 400px; max-height: 85vh; overflow-y: auto; direction: rtl; }
        .modal-title { color: #f48fb1; margin-bottom: 15px; text-align: center; }
        .modal-close { display: block; width: 100%; padding: 12px; background: #f48fb1; color: white; border: none; border-radius: 10px; font-family: 'Heebo', sans-serif; font-size: 1em; font-weight: 600; cursor: pointer; margin-top: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="bsd">×‘×¡"×“</div>
        <h1>ğŸ¥— ×”×¨×–-×™×”</h1>
        <p class="subtitle">×”×“×¨×š ×”×§×œ×” ×œ××›×™×œ×” × ×›×•× ×”</p>
        
        <div class="inspiration-box" id="inspirationBox">
            <span class="inspiration-text" id="inspirationText">××ª ×¨×–×” ×•×—×˜×•×‘×” âœ¨</span>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('plate',this)">ğŸ½ï¸ ×¦×œ×—×ª</button>
            <button class="tab" onclick="showTab('menu',this)">ğŸ“‹ ×ª×¤×¨×™×˜×™×</button>
            <button class="tab" onclick="showTab('calc',this)">ğŸ“Š ××—×©×‘×•×Ÿ</button>
            <button class="tab" onclick="showTab('progress',this)">ğŸ“ˆ ×”×ª×§×“××•×ª</button>
            <button class="tab" onclick="showTab('recipes',this)">ğŸ³ ××ª×›×•× ×™×</button>
            <button class="tab" onclick="showTab('tips',this)">ğŸ’¡ ×˜×™×¤×™×</button>
            <button class="tab" onclick="showTab('journal',this)">ğŸ“ ×¨×©×™××•×ª</button>
        </div>
        
        <!-- PLATE TAB -->
        <div id="plate-tab" class="card">
            <div class="section-title">×”×¦×œ×—×ª ×©×œ×™</div>
            
            <div class="meal-section">
                <div class="meal-title">ğŸ½ï¸ ×‘×—×™×¨×ª ××¨×•×—×”:</div>
                <div class="cat-filter">
                    <button class="cat-filter-btn active" onclick="selectMeal('×‘×•×§×¨',this)">ğŸŒ… ×‘×•×§×¨</button>
                    <button class="cat-filter-btn" onclick="selectMeal('×‘×™× ×™×™×1',this)">ğŸ ×‘×™× ×™×™×</button>
                    <button class="cat-filter-btn" onclick="selectMeal('×¦×”×¨×™×™×',this)">â˜€ï¸ ×¦×”×¨×™×™×</button>
                    <button class="cat-filter-btn" onclick="selectMeal('×‘×™× ×™×™×2',this)">ğŸ¥œ ×‘×™× ×™×™×</button>
                    <button class="cat-filter-btn" onclick="selectMeal('×¢×¨×‘',this)">ğŸŒ™ ×¢×¨×‘</button>
                </div>
            </div>
            
            <div class="plate-container" id="plateContainer">
                <svg viewBox="0 0 260 260" style="width:100%;height:220px;">
                    <defs><radialGradient id="bowl" cx="50%" cy="30%" r="70%"><stop offset="0%" stop-color="#fafafa"/><stop offset="100%" stop-color="#e8e8e8"/></radialGradient></defs>
                    <circle cx="130" cy="130" r="125" fill="#f5f5f5" stroke="#f48fb1" stroke-width="3"/>
                    <circle cx="130" cy="130" r="120" fill="none" stroke="#fce4ec" stroke-width="6" stroke-dasharray="8,4"/>
                    <circle cx="130" cy="130" r="108" fill="url(#bowl)"/>
                    <circle cx="130" cy="130" r="100" fill="#fafafa"/>
                    <line x1="130" y1="30" x2="130" y2="230" stroke="#e0e0e0" stroke-width="2" stroke-dasharray="5,3"/>
                    <line x1="130" y1="130" x2="230" y2="130" stroke="#e0e0e0" stroke-width="2" stroke-dasharray="5,3"/>
                    <path d="M 130 130 L 130 30 A 100 100 0 0 0 30 130 Z" fill="rgba(152,216,200,0.15)"/>
                    <path d="M 130 130 L 30 130 A 100 100 0 0 0 130 230 Z" fill="rgba(152,216,200,0.15)"/>
                    <path d="M 130 130 L 130 30 A 100 100 0 0 1 230 130 Z" fill="rgba(244,143,177,0.15)"/>
                    <path d="M 130 130 L 230 130 A 100 100 0 0 1 130 230 Z" fill="rgba(255,213,79,0.15)"/>
                </svg>
                <svg id="foodDisp" viewBox="0 0 260 260" style="position:absolute;top:0;left:0;width:100%;height:220px;pointer-events:none;"></svg>
                <div class="plate-labels">
                    <span class="plate-label veggies-label">ğŸ¥¬ ×™×¨×§×•×ª 50%</span>
                    <span class="plate-label protein-label">ğŸ— ×—×œ×‘×•×Ÿ 25%</span>
                    <span class="plate-label carbs-label">ğŸš ×¤×—××™××” 25%</span>
                </div>
            </div>
            
            <div class="cat-sec"><div class="cat-title" onclick="toggle('veg')">ğŸ¥¬ ×™×¨×§×•×ª â–¼</div><div class="cat-note">×× ×” = ×›×•×¡</div><div id="veg" class="cat-items">
                <button class="food-btn" onclick="add('ğŸ¥¬','×—×¡×”','×™×¨×§×•×ª',15)">ğŸ¥¬ ×—×¡×” 15</button>
                <button class="food-btn" onclick="add('ğŸ…','×¢×’×‘× ×™×™×”','×™×¨×§×•×ª',22)">ğŸ… ×¢×’×‘× ×™×™×” 22</button>
                <button class="food-btn" onclick="add('ğŸ¥’','××œ×¤×¤×•×Ÿ','×™×¨×§×•×ª',16)">ğŸ¥’ ××œ×¤×¤×•×Ÿ 16</button>
                <button class="food-btn" onclick="add('ğŸ§…','×‘×¦×œ','×™×¨×§×•×ª',40)">ğŸ§… ×‘×¦×œ 40</button>
                <button class="food-btn" onclick="add('ğŸ¥•','×’×–×¨','×™×¨×§×•×ª',41)">ğŸ¥• ×’×–×¨ 41</button>
                <button class="food-btn" onclick="add('ğŸ¥¦','×‘×¨×•×§×•×œ×™','×™×¨×§×•×ª',55)">ğŸ¥¦ ×‘×¨×•×§×•×œ×™ 55</button>
                <button class="food-btn" onclick="add('ğŸ«‘','×¤×œ×¤×œ','×™×¨×§×•×ª',30)">ğŸ«‘ ×¤×œ×¤×œ 30</button>
                <button class="food-btn" onclick="add('ğŸ†','×—×¦×™×œ','×™×¨×§×•×ª',35)">ğŸ† ×—×¦×™×œ 35</button>
                <button class="food-btn" onclick="add('ğŸ¥’','×§×™×©×•×','×™×¨×§×•×ª',17)">ğŸ¥’ ×§×™×©×•× 17</button>
                <button class="food-btn" onclick="add('ğŸŒ±','× ×‘×˜×™×','×™×¨×§×•×ª',31)">ğŸŒ± × ×‘×˜×™× 31</button>
                <button class="food-btn" onclick="add('ğŸ„','×¤×˜×¨×™×•×ª','×™×¨×§×•×ª',22)">ğŸ„ ×¤×˜×¨×™×•×ª 22</button>
            </div></div>
            
            <div class="cat-sec"><div class="cat-title" onclick="toggle('prot')">ğŸ— ×—×œ×‘×•×Ÿ â–¼</div><div class="cat-note">×× ×” = 150-200 ×’×¨×</div><div id="prot" class="cat-items">
                <button class="food-btn" onclick="add('ğŸ—','×¢×•×£','×—×œ×‘×•×Ÿ',165)">ğŸ— ×¢×•×£ 165</button>
                <button class="food-btn" onclick="add('ğŸ¦ƒ','×”×•×“×•','×—×œ×‘×•×Ÿ',135)">ğŸ¦ƒ ×”×•×“×• 135</button>
                <button class="food-btn" onclick="add('ğŸ¥©','×‘×©×¨','×—×œ×‘×•×Ÿ',250)">ğŸ¥© ×‘×©×¨ 250</button>
                <button class="food-btn" onclick="add('ğŸŸ','×¡×œ××•×Ÿ','×—×œ×‘×•×Ÿ',208)">ğŸŸ ×¡×œ××•×Ÿ 208</button>
                <button class="food-btn" onclick="add('ğŸ ','×“×’','×—×œ×‘×•×Ÿ',130)">ğŸ  ×“×’ 130</button>
                <button class="food-btn" onclick="add('ğŸ¥š','×‘×™×¦×”','×—×œ×‘×•×Ÿ',78)">ğŸ¥š ×‘×™×¦×” 78</button>
                <button class="food-btn" onclick="add('ğŸ§€','×¦×”×•×‘×”','×—×œ×‘×•×Ÿ',113)">ğŸ§€ ×¦×”×•×‘×” 113</button>
                <button class="food-btn" onclick="add('ğŸ§ˆ','×œ×‘× ×”','×—×œ×‘×•×Ÿ',98)">ğŸ§ˆ ×œ×‘× ×” 98</button>
                <button class="food-btn" onclick="add('ğŸ§€','×‘×•×œ×’×¨×™×ª','×—×œ×‘×•×Ÿ',75)">ğŸ§€ ×‘×•×œ×’×¨×™×ª 75</button>
                <button class="food-btn" onclick="add('ğŸ¥›','×™×•×’×•×¨×˜','×—×œ×‘×•×Ÿ',100)">ğŸ¥› ×™×•×’×•×¨×˜ 100</button>
                <button class="food-btn" onclick="add('ğŸ¥›','×§×•×˜×’×³','×—×œ×‘×•×Ÿ',98)">ğŸ¥› ×§×•×˜×’×³ 98</button>
            </div></div>
            
            <div class="cat-sec"><div class="cat-title" onclick="toggle('carb')">ğŸš ×¤×—××™××•×ª â–¼</div><div class="cat-note">×× ×” = ×—×¦×™ ×›×•×¡ ××‘×•×©×œ / ×¤×¨×•×¡×”</div><div id="carb" class="cat-items">
                <button class="food-btn" onclick="add('ğŸš','××•×¨×–','×¤×—××™××”',130)">ğŸš ××•×¨×– 130</button>
                <button class="food-btn" onclick="add('ğŸ','×¤×¡×˜×”','×¤×—××™××”',131)">ğŸ ×¤×¡×˜×” 131</button>
                <button class="food-btn" onclick="add('ğŸ¥”','×ª×¤×•×´×','×¤×—××™××”',77)">ğŸ¥” ×ª×¤×•×´× 77</button>
                <button class="food-btn" onclick="add('ğŸ ','×‘×˜×˜×”','×¤×—××™××”',86)">ğŸ  ×‘×˜×˜×” 86</button>
                <button class="food-btn" onclick="add('ğŸƒ','×“×œ×¢×ª','×¤×—××™××”',26)">ğŸƒ ×“×œ×¢×ª 26</button>
                <button class="food-btn" onclick="add('ğŸ','×œ×—× ×§×œ','×¤×—××™××”',45)">ğŸ ×œ×—× ×§×œ 45</button>
                <button class="food-btn" onclick="add('ğŸ','×œ×—× ×œ×‘×Ÿ','×¤×—××™××”',79)">ğŸ ×œ×—× ×œ×‘×Ÿ 79</button>
                <button class="food-btn" onclick="add('ğŸ¥™','×¤×™×ª×”','×¤×—××™××”',165)">ğŸ¥™ ×¤×™×ª×” 165</button>
                <button class="food-btn" onclick="add('ğŸ¥–','×‘×’×˜','×¤×—××™××”',140)">ğŸ¥– ×‘×’×˜ 140</button>
                <button class="food-btn" onclick="add('ğŸ','×—×œ×”','×¤×—××™××”',160)">ğŸ ×—×œ×” 160</button>
                <button class="food-btn" onclick="add('ğŸ«“','×˜×•×¨×˜×™×”','×¤×—××™××”',120)">ğŸ«“ ×˜×•×¨×˜×™×” 120</button>
            </div></div>
            
            <div class="cat-sec"><div class="cat-title" onclick="toggle('fat')">ğŸ¥‘ ×©×•××Ÿ ×‘×¨×™× â–¼</div><div class="cat-note">×× ×” = ×›×£</div><div id="fat" class="cat-items">
                <button class="food-btn" onclick="add('ğŸ¥‘','××‘×•×§×“×•','×©×•××Ÿ',160)">ğŸ¥‘ ××‘×•×§×“×• 160</button>
                <button class="food-btn" onclick="add('ğŸ¥„','×©××Ÿ ×–×™×ª','×©×•××Ÿ',119)">ğŸ¥„ ×©××Ÿ ×–×™×ª 119</button>
                <button class="food-btn" onclick="add('ğŸ¥„','×˜×—×™× ×”','×©×•××Ÿ',89)">ğŸ¥„ ×˜×—×™× ×” 89</button>
                <button class="food-btn" onclick="add('ğŸ«’','×–×™×ª×™×','×©×•××Ÿ',36)">ğŸ«’ ×–×™×ª×™× 36</button>
                <button class="food-btn" onclick="add('ğŸ¥œ','××’×•×–×™×','×©×•××Ÿ',185)">ğŸ¥œ ××’×•×–×™× 185</button>
                <button class="food-btn" onclick="add('ğŸ¥œ','×©×§×“×™×','×©×•××Ÿ',164)">ğŸ¥œ ×©×§×“×™× 164</button>
                <button class="food-btn" onclick="add('ğŸ§ˆ','×—×××”','×©×•××Ÿ',102)">ğŸ§ˆ ×—×××” 102</button>
            </div></div>
            
            <div class="cat-sec"><div class="cat-title" onclick="toggle('fruit')">ğŸ ×¤×™×¨×•×ª â–¼</div><div class="cat-note">×× ×” = ×›×•×¡ / ×¤×¨×™ ×‘×™× ×•× ×™</div><div id="fruit" class="cat-items">
                <button class="food-btn" onclick="add('ğŸ','×ª×¤×•×—','×¤×¨×™',95)">ğŸ ×ª×¤×•×— 95</button>
                <button class="food-btn" onclick="add('ğŸŒ','×‘× × ×”','×¤×¨×™',105)">ğŸŒ ×‘× × ×” 105</button>
                <button class="food-btn" onclick="add('ğŸ¥','×§×™×•×•×™','×¤×¨×™',42)">ğŸ¥ ×§×™×•×•×™ 42</button>
                <button class="food-btn" onclick="add('ğŸ¥­','×× ×’×•','×¤×¨×™',99)">ğŸ¥­ ×× ×’×• 99</button>
                <button class="food-btn" onclick="add('ğŸ‰','××‘×˜×™×—','×¤×¨×™',46)">ğŸ‰ ××‘×˜×™×— 46</button>
                <button class="food-btn" onclick="add('ğŸŠ','×ª×¤×•×–','×¤×¨×™',62)">ğŸŠ ×ª×¤×•×– 62</button>
                <button class="food-btn" onclick="add('ğŸ“','×ª×•×ª','×¤×¨×™',49)">ğŸ“ ×ª×•×ª 49</button>
            </div></div>
            
            <div class="food-list" id="foodList"></div>
            
            <div class="analysis" id="analysis">
                <div style="font-weight:700;color:#2e7d32;margin-bottom:6px;">ğŸ“Š × ×™×ª×•×—</div>
                <div class="calories" id="totalCal">0 ×§×œ×•×¨×™×•×ª</div>
                <p id="analysisTxt" style="font-size:0.85em;"></p>
            </div>
            
            <div style="text-align:center;">
                <button class="btn" onclick="analyze()">ğŸ” × ×™×ª×•×—</button>
                <button class="btn" onclick="clearAll()">ğŸ—‘ï¸ × ×™×§×•×™</button>
                <button class="btn" onclick="saveMeal()">ğŸ’¾ ×©××™×¨×” ×›×ª×¤×¨×™×˜</button>
            </div>
            
            <div class="share-btns">
                <button class="btn btn-small btn-outline" onclick="setMealReminder()">â° ×ª×–×›×•×¨×ª</button>
                <button class="btn btn-small btn-outline" onclick="showEmptyPlate()">â­• ×¦×œ×—×ª ×¨×™×§×”</button>
                <button class="btn btn-small btn-outline" onclick="showIcons()">ğŸ¨ ××™×™×§×•× ×™×</button>
            </div>
        </div>
        
        <!-- MENU TAB -->
        <div id="menu-tab" class="card" style="display:none;">
            <div class="section-title">×ª×¤×¨×™×˜×™× ×™×•××™×™×</div>
            
            <div class="meal-section"><div class="meal-title">ğŸŒ… ××¨×•×—×ª ×‘×•×§×¨</div><div class="meal-items" id="menu-×‘×•×§×¨">×œ× × ×‘×—×¨×” ××¨×•×—×”</div><button class="rm-btn meal-delete" onclick="clearSingleMeal('×‘×•×§×¨')">âœ•</button></div>
            <div class="meal-section"><div class="meal-title">ğŸ ××¨×•×—×ª ×‘×™× ×™×™× (×‘×•×§×¨)</div><div class="meal-items" id="menu-×‘×™× ×™×™×1">×œ× × ×‘×—×¨×” ××¨×•×—×”</div><button class="rm-btn meal-delete" onclick="clearSingleMeal('×‘×™× ×™×™×1')">âœ•</button></div>
            <div class="meal-section"><div class="meal-title">â˜€ï¸ ××¨×•×—×ª ×¦×”×¨×™×™×</div><div class="meal-items" id="menu-×¦×”×¨×™×™×">×œ× × ×‘×—×¨×” ××¨×•×—×”</div><button class="rm-btn meal-delete" onclick="clearSingleMeal('×¦×”×¨×™×™×')">âœ•</button></div>
            <div class="meal-section"><div class="meal-title">ğŸ¥œ ××¨×•×—×ª ×‘×™× ×™×™× (××—×”×´×¦)</div><div class="meal-items" id="menu-×‘×™× ×™×™×2">×œ× × ×‘×—×¨×” ××¨×•×—×”</div><button class="rm-btn meal-delete" onclick="clearSingleMeal('×‘×™× ×™×™×2')">âœ•</button></div>
            <div class="meal-section"><div class="meal-title">ğŸŒ™ ××¨×•×—×ª ×¢×¨×‘</div><div class="meal-items" id="menu-×¢×¨×‘">×œ× × ×‘×—×¨×” ××¨×•×—×”</div><button class="rm-btn meal-delete" onclick="clearSingleMeal('×¢×¨×‘')">âœ•</button></div>
            
            <div class="result" id="menuTotal" style="display:block;"><div class="result-val" id="menuTotalCal">0</div><div class="result-lbl">×¡×”×´×› ×§×œ×•×¨×™×•×ª ×™×•××™</div></div>
            
            <div class="share-btns">
                <button class="btn btn-small btn-outline" onclick="exportToExcel()">ğŸ“Š ××§×¡×œ</button>
                <button class="btn btn-small" onclick="clearMenu()">ğŸ—‘ï¸ × ×™×§×•×™</button>
            </div>
            
            <div class="section" style="margin-top:15px;">
                <h3>ğŸ’§ ××¢×§×‘ ×©×ª×™×” ×™×•××™</h3>
                <div class="water-tracker" id="waterTracker"></div>
                <div class="water-count" id="waterCount">0/8 ×›×•×¡×•×ª ××™×</div>
                <button class="btn btn-small btn-outline" onclick="resetWater()" style="margin-top:10px;">ğŸ”„ ××™×¤×•×¡</button>
            </div>
        </div>
        
        <!-- CALCULATOR TAB -->
        <div id="calc-tab" class="card" style="display:none;">
            <div class="section-title">××—×©×‘×•×Ÿ ×‘×¨×™××•×ª</div>
            <div class="section"><h3>ğŸ“ ×—×™×©×•×‘ BMI</h3>
                <div class="input-grp"><label>×’×•×‘×” (×¡×´×)</label><input type="number" id="height" placeholder="165" oninput="calcBMI()"></div>
                <div class="input-grp"><label>××©×§×œ (×§×´×’)</label><input type="number" id="weight" placeholder="70" oninput="calcBMI()"></div>
                <div class="result" id="bmiRes"><div class="result-val" id="bmiVal">--</div><div class="result-lbl" id="bmiStat">BMI</div></div>
            </div>
            <div class="section"><h3>ğŸ“ ×™×—×¡ ××•×ª×Ÿ-×™×¨×š</h3>
                <div class="note-hint">ğŸ’¡ ×™×—×¡ ××™×“××œ×™ ×œ× ×©×™×: ××ª×—×ª ×œ-0.80 | ×œ×’×‘×¨×™×: ××ª×—×ª ×œ-0.90</div>
                <div class="input-grp"><label>×”×™×§×£ ××•×ª×Ÿ (×¡×´×)</label><input type="number" id="waist" placeholder="80" oninput="calcWHR()"></div>
                <div class="input-grp"><label>×”×™×§×£ ×™×¨×š (×¡×´×)</label><input type="number" id="hip" placeholder="100" oninput="calcWHR()"></div>
                <div class="circles" id="whrCircles" style="display:none;"><div class="circle waist-c"><span id="waistD">--</span><small>××•×ª×Ÿ</small></div><div class="circle hip-c"><span id="hipD">--</span><small>×™×¨×š</small></div></div>
                <div class="result" id="whrRes"><div class="result-val" id="whrVal">--</div><div class="result-lbl" id="whrStat">×™×—×¡ ××•×ª×Ÿ-×™×¨×š</div></div>
            </div>
        </div>
        
        <!-- PROGRESS TAB -->
        <div id="progress-tab" class="card" style="display:none;">
            <div class="section-title">××¢×§×‘ ×”×ª×§×“××•×ª</div>
            <div class="section"><h3>âš–ï¸ ×™×¢×“ ××©×§×œ</h3>
                <div class="input-grp"><label>××©×§×œ × ×•×›×—×™ (×§×´×’)</label><input type="number" id="startW" placeholder="75" oninput="calcProg()"></div>
                <div class="input-grp"><label>××©×§×œ ×™×¢×“ (×§×´×’)</label><input type="number" id="goalW" placeholder="65" oninput="calcProg()"></div>
            </div>
            <div class="result" id="diffRes"><div class="result-val" id="diffVal">--</div><div class="result-lbl">×§×´×’ ×œ×”×•×¨×™×“</div></div>
            <div id="chartBox" class="chart-container" style="display:none;">
                <div style="display:flex;justify-content:space-between;align-items:center;"><h3 style="color:#f48fb1;font-size:0.9em;">ğŸ“… ×ª×—×–×™×ª ×™×¨×™×“×” ×‘××©×§×œ</h3><button class="rm-btn" onclick="clearChart()">âœ•</button></div>
                <canvas id="chart" height="180"></canvas>
                <div id="timeline" style="text-align:center;margin-top:10px;font-weight:600;color:#f48fb1;font-size:0.85em;"></div>
            </div>
            <div class="tip"><div class="tip-title">ğŸ’¡ ×˜×™×¤</div><div class="tip-text">×™×¨×™×“×” ×‘×¨×™××”: 0.5-1 ×§×´×’ ×‘×©×‘×•×¢</div></div>
        </div>
        
        <!-- RECIPES TAB -->
        <div id="recipes-tab" class="card" style="display:none;">
            <div class="section-title">××ª×›×•× ×™× ×‘×¨×™××™×</div>
            <div class="section"><h3>â• ×”×•×¡×¤×ª ××ª×›×•×Ÿ ××™×©×™</h3>
                <div class="input-grp"><label>×©× ×”××ª×›×•×Ÿ</label><input type="text" id="newRecipeName" placeholder="×©× ×”××ª×›×•×Ÿ"></div>
                <div class="input-grp"><label>×§×˜×’×•×¨×™×”</label><select id="newRecipeCat"><option value="×‘×•×§×¨">×‘×•×§×¨</option><option value="×‘×©×¨">×‘×©×¨×™</option><option value="×—×œ×‘">×—×œ×‘×™</option><option value="×¡×œ×˜">×¡×œ×˜×™×</option><option value="×××¤×”">×××¤×™×</option><option value="×§×™× ×•×—">×§×™× ×•×—×™×</option></select></div>
                <div class="input-grp"><label>××¦×¨×›×™× ×•×”×›× ×”</label><textarea id="newRecipeText" placeholder="××¦×¨×›×™× ×•××•×¤×Ÿ ×”×”×›× ×”..."></textarea></div>
                <div class="input-grp"><label>×§×œ×•×¨×™×•×ª ×œ×× ×”</label><input type="number" id="newRecipeCal" placeholder="250"></div>
                <button class="btn" onclick="addPersonalRecipe()">â• ×”×•×¡×¤×”</button>
            </div>
            <div id="personalRecipes"></div>
            <div class="cat-filter">
                <button class="cat-filter-btn active" onclick="filterRecipes('all',this)">×”×›×œ</button>
                <button class="cat-filter-btn" onclick="filterRecipes('×‘×•×§×¨',this)">ğŸ³ ×‘×•×§×¨</button>
                <button class="cat-filter-btn" onclick="filterRecipes('×‘×©×¨',this)">ğŸ— ×‘×©×¨</button>
                <button class="cat-filter-btn" onclick="filterRecipes('×—×œ×‘',this)">ğŸ¥› ×—×œ×‘×™</button>
                <button class="cat-filter-btn" onclick="filterRecipes('×¡×œ×˜',this)">ğŸ¥— ×¡×œ×˜×™×</button>
            </div>
            
            <div id="recipesContainer">
                <div class="recipe" data-cat="×‘×•×§×¨"><span class="recipe-cat">ğŸ³ ×‘×•×§×¨</span><div class="recipe-title">ğŸ¥ ×¤× ×§×™×™×§ ×—×œ×‘×•×Ÿ</div><div class="recipe-cal">×›-200 ×§×œ×³ | 15 ×“×§×•×ª</div><div class="recipe-section">××¦×¨×›×™×:</div><div class="recipe-text">â€¢ 1 ×‘× × ×” ×‘×©×œ×” â€¢ 2 ×‘×™×¦×™× â€¢ 2 ×›×¤×•×ª ×§××— ×©×§×“×™× â€¢ ×—×¦×™ ×›×¤×™×ª ×§×™× ××•×Ÿ</div><div class="recipe-section">×”×›× ×”:</div><div class="recipe-text">1. ××•×¢×›×™× ×‘× × ×” 2. ××•×¡×™×¤×™× ×‘×™×¦×™× ×•×§××— 3. ××˜×’× ×™× 2-3 ×“×§×•×ª ××›×œ ×¦×“</div></div>
                <div class="recipe" data-cat="×‘×•×§×¨"><span class="recipe-cat">ğŸ³ ×‘×•×§×¨</span><div class="recipe-title">ğŸ³ ×©×§×©×•×§×” ×§×œ×”</div><div class="recipe-cal">×›-250 ×§×œ×³ | 20 ×“×§×•×ª</div><div class="recipe-section">××¦×¨×›×™×:</div><div class="recipe-text">â€¢ 2 ×‘×™×¦×™× â€¢ 3 ×¢×’×‘× ×™×•×ª â€¢ ×—×¦×™ ×‘×¦×œ â€¢ ×©×•× â€¢ ×ª×‘×œ×™× ×™×</div><div class="recipe-section">×”×›× ×”:</div><div class="recipe-text">1. ××˜×’× ×™× ×‘×¦×œ ×•×©×•× 2. ××•×¡×™×¤×™× ×¢×’×‘× ×™×•×ª 3. ×©×•×‘×¨×™× ×‘×™×¦×™× ×•××‘×©×œ×™× 5 ×“×§×•×ª</div></div>
                <div class="recipe" data-cat="×‘×©×¨"><span class="recipe-cat">ğŸ— ×‘×©×¨×™</span><div class="recipe-title">ğŸ¦ƒ ×©×•×•××¨××” ×”×•×“×•</div><div class="recipe-cal">×›-180 ×§×œ×³ | 25 ×“×§×•×ª</div><div class="recipe-section">××¦×¨×›×™×:</div><div class="recipe-text">â€¢ 400 ×’×¨× ×—×–×” ×”×•×“×• â€¢ ×›××•×Ÿ â€¢ ×›×•×¨×›×•× â€¢ ×¤×¤×¨×™×§×”</div><div class="recipe-section">×”×›× ×”:</div><div class="recipe-text">1. ××ª×‘×œ×™× ×”×•×“×• 2. ×¦×•×œ×™× ×‘××—×‘×ª 3-4 ×“×§×•×ª ××›×œ ×¦×“ 3. ×¤×•×¨×¡×™×</div></div>
                <div class="recipe" data-cat="×—×œ×‘"><span class="recipe-cat">ğŸ¥› ×—×œ×‘×™</span><div class="recipe-title">ğŸ¥— ×¡×œ×˜ ×™×•×•× ×™</div><div class="recipe-cal">×›-220 ×§×œ×³ | 10 ×“×§×•×ª</div><div class="recipe-section">××¦×¨×›×™×:</div><div class="recipe-text">â€¢ ×¢×’×‘× ×™×•×ª â€¢ ××œ×¤×¤×•×Ÿ â€¢ ×‘×¦×œ ×¡×’×•×œ â€¢ ×’×‘×™× ×” ×‘×•×œ×’×¨×™×ª â€¢ ×–×™×ª×™×</div><div class="recipe-section">×”×›× ×”:</div><div class="recipe-text">1. ×—×•×ª×›×™× ×™×¨×§×•×ª ×œ×§×•×‘×™×•×ª 2. ××•×¡×™×¤×™× ×’×‘×™× ×” ×•×–×™×ª×™× 3. ××ª×‘×œ×™×</div></div>
                <div class="recipe" data-cat="×¡×œ×˜"><span class="recipe-cat">ğŸ¥— ×¡×œ×˜×™×</span><div class="recipe-title">ğŸ¥— ×¡×œ×˜ ×§×™× ×•××”</div><div class="recipe-cal">×›-280 ×§×œ×³ | 25 ×“×§×•×ª</div><div class="recipe-section">××¦×¨×›×™×:</div><div class="recipe-text">â€¢ ×—×¦×™ ×›×•×¡ ×§×™× ×•××” â€¢ ×¢×’×‘× ×™×•×ª ×©×¨×™ â€¢ ××œ×¤×¤×•×Ÿ â€¢ × ×¢× ×¢ â€¢ ×œ×™××•×Ÿ</div><div class="recipe-section">×”×›× ×”:</div><div class="recipe-text">1. ××‘×©×œ×™× ×§×™× ×•××” ×•××§×¨×¨×™× 2. ×—×•×ª×›×™× ×™×¨×§×•×ª 3. ××¢×¨×‘×‘×™× ×•××ª×‘×œ×™×</div></div>
            </div>
        </div>
        
        <!-- TIPS TAB -->
        <div id="tips-tab" class="card" style="display:none;">
            <div class="section-title">×˜×™×¤×™× ×œ×”×¨×–-×™×”</div>
            <div class="section"><h3>â• ×”×•×¡×¤×ª ×˜×™×¤ ××™×©×™</h3>
                <div class="input-grp"><label>×›×•×ª×¨×ª ×”×˜×™×¤</label><input type="text" id="newTipTitle" placeholder="×›×•×ª×¨×ª"></div>
                <div class="input-grp"><label>×ª×•×›×Ÿ ×”×˜×™×¤</label><textarea id="newTipText" placeholder="×ª×•×›×Ÿ ×”×˜×™×¤..."></textarea></div>
                <button class="btn" onclick="addPersonalTip()">â• ×”×•×¡×¤×”</button>
            </div>
            <div id="personalTips"></div>
            <div class="tip"><div class="tip-title">ğŸ½ï¸ ×¦×œ×—×ª ×§×˜× ×”</div><div class="tip-text">×”××•×— ×—×•×©×‘ ×©××›×œ× ×• ×™×•×ª×¨ ×›×©×”×¦×œ×—×ª ××œ××”!</div></div>
            <div class="tip"><div class="tip-title">ğŸŒˆ ×¦×œ×—×ª ×¦×‘×¢×•× ×™×ª</div><div class="tip-text">×¦×‘×¢×™× ×©×•× ×™× = ×•×™×˜××™× ×™× ×©×•× ×™×!</div></div>
            <div class="tip"><div class="tip-title">ğŸ¥¤ ×›×•×¡ ××™× ×œ×¤× ×™</div><div class="tip-text">×œ×©×ª×•×ª ×›×•×¡ ××™× 20 ×“×§×•×ª ×œ×¤× ×™ ×”××¨×•×—×”</div></div>
            <div class="tip"><div class="tip-title">ğŸ¢ ×œ××›×•×œ ×œ××˜</div><div class="tip-text">×œ×œ×¢×•×¡ ×›×œ ×‘×™×¡ 20 ×¤×¢×!</div></div>
            <div class="tip"><div class="tip-title">ğŸ¥¬ ×™×¨×§×•×ª ×§×•×“×!</div><div class="tip-text">×ª××™×“ ×œ×”×ª×—×™×œ ×¢× ×™×¨×§×•×ª</div></div>
        </div>
        
        <!-- JOURNAL TAB -->
        <div id="journal-tab" class="card" style="display:none;">
            <div class="section-title">×¨×©×™××•×ª ××™×©×™×•×ª</div>
            <div class="memo-note"><textarea id="newJournalEntry" placeholder="×—×•×•×™×•×ª, ××—×©×‘×•×ª, ×ª×—×•×©×•×ª, ×”×¦×œ×—×•×ª, ×¨×¢×™×•× ×•×ª..."></textarea></div>
            <div style="text-align:center;"><button class="btn" onclick="saveJournalEntry()">ğŸ’¾ ×©××™×¨×ª ×¨×©×™××”</button><button class="btn btn-outline" onclick="addNewNote()">â• ×”×•×¡×¤×ª ××©×‘×¦×ª</button></div>
            <div id="journalEntries"></div>
        </div>
    </div>
    
    <!-- MODAL -->
    <div id="modal" class="modal-overlay" style="display:none;" onclick="if(event.target===this)closeModal()">
        <div class="modal-content">
            <h2 class="modal-title" id="modalTitle">×›×•×ª×¨×ª</h2>
            <div id="modalBody"></div>
            <p style="font-size:0.75em;color:#888;text-align:center;margin:10px 0;">ğŸ“± ×œ×—×™×¦×” ××¨×•×›×” ×œ×”×¢×ª×§×” ××• ×¦×™×œ×•× ××¡×š</p>
            <button class="modal-close" onclick="closeModal()">âœ“ ×¡×’×™×¨×”</button>
        </div>
    </div>
    
    <script>
        var foods = [];
        var waterCups = 0;
        var currentMeal = '×‘×•×§×¨';
        var menuMeals = {'×‘×•×§×¨':{foods:[],cal:0},'×‘×™× ×™×™×1':{foods:[],cal:0},'×¦×”×¨×™×™×':{foods:[],cal:0},'×‘×™× ×™×™×2':{foods:[],cal:0},'×¢×¨×‘':{foods:[],cal:0}};
        var personalRecipes = [];
        var personalTips = [];
        var journalEntries = [];
        var pos = {'×™×¨×§×•×ª':[{x:45,y:90},{x:65,y:115},{x:45,y:140},{x:75,y:160}],'×—×œ×‘×•×Ÿ':[{x:165,y:65},{x:190,y:85},{x:210,y:70}],'×¤×—××™××”':[{x:165,y:175},{x:190,y:195},{x:210,y:180}],'×©×•××Ÿ':[{x:90,y:105},{x:100,y:150}],'×¤×¨×™':[{x:130,y:70},{x:130,y:210}]};
        
        var inspirations = [
            "××ª ×¨×–×” ×•×—×˜×•×‘×” âœ¨",
            "×¢×•×“×¤×™ ×”×©×•××Ÿ ××ª× ×“×¤×™× ×××š ğŸ’¨",
            "××ª ×™×¤×” ×•×–×•×”×¨×ª ğŸŒŸ",
            "××ª × ×¨××™×ª ×¦×¢×™×¨×” ××ª××™×“ ğŸŒ¸",
            "××” ×”×¡×•×“ ×©×œ×š? ×›×•×œ× ×©×•××œ×™× ğŸ’•",
            "×”×’×•×£ ×©×œ×š ××•×©×œ× ×•××¤×•×¡×œ ğŸ‘—",
            "××ª ××œ××ª ×× ×¨×’×™×” ×•×—×™×•× ×™×•×ª âš¡",
            "×”×¢×•×¨ ×©×œ×š ×–×•×”×¨ ×•×‘×¨×™× ğŸ’",
            "××ª ××¨×’×™×©×” ×§×œ×™×œ×” ×›× ×•×¦×” ğŸª¶",
            "×”×‘×’×“×™× × ×¨××™× ×¢×œ×™×™×š ××“×”×™× ğŸ‘ ",
            "××ª ××©×“×¨×ª ×‘×™×˜×—×•×Ÿ ×•×™×•×¤×™ ğŸ‘‘",
            "×”×’×•×£ ×©×œ×š ×—×–×§ ×•×’××™×© ğŸ’ª",
            "××ª ×”×’×¨×¡×” ×”×›×™ ×˜×•×‘×” ×©×œ ×¢×¦××š ğŸ¦‹",
            "×›×•×œ× ××ª×¤×¢×œ×™× ××”××¨××” ×©×œ×š ğŸ˜",
            "××ª ×¤×©×•×˜ ×–×•×”×¨×ª ××‘×¤× ×™× ×•××‘×—×•×¥ â˜€ï¸"
        ];
        var currentInspiration = 0;
        
        function rotateInspiration(){
            var textEl = document.getElementById('inspirationText');
            textEl.style.opacity = '0';
            setTimeout(function(){
                currentInspiration = (currentInspiration + 1) % inspirations.length;
                textEl.textContent = inspirations[currentInspiration];
                textEl.style.opacity = '1';
            }, 800);
        }
        setInterval(rotateInspiration, 8000);
        
        function loadData(){try{var s=localStorage.getItem('harazya_v3');if(s){var d=JSON.parse(s);if(d.menuMeals)menuMeals=d.menuMeals;if(d.personalRecipes)personalRecipes=d.personalRecipes;if(d.personalTips)personalTips=d.personalTips;if(d.journalEntries)journalEntries=d.journalEntries;renderMenu();renderPersonalRecipes();renderPersonalTips();renderJournal();}}catch(e){}}
        function saveData(){try{localStorage.setItem('harazya_v3',JSON.stringify({menuMeals:menuMeals,personalRecipes:personalRecipes,personalTips:personalTips,journalEntries:journalEntries}));}catch(e){}}
        
        function initWater(){var c=document.getElementById('waterTracker');c.innerHTML='';for(var i=0;i<8;i++){var cup=document.createElement('div');cup.className='water-cup';cup.innerHTML='<span>ğŸ’§</span>';(function(idx){cup.onclick=function(){toggleWater(idx);};})(i);c.appendChild(cup);}}
        function toggleWater(idx){var cups=document.querySelectorAll('.water-cup');if(cups[idx].classList.contains('filled')){for(var i=idx;i<8;i++)cups[i].classList.remove('filled');waterCups=idx;}else{for(var i=0;i<=idx;i++)cups[i].classList.add('filled');waterCups=idx+1;}document.getElementById('waterCount').textContent=waterCups+'/8 ×›×•×¡×•×ª ××™×';}
        
        function resetWater(){waterCups=0;var cups=document.querySelectorAll('.water-cup');for(var i=0;i<cups.length;i++)cups[i].classList.remove('filled');document.getElementById('waterCount').textContent='0/8 ×›×•×¡×•×ª ××™×';}
        
        initWater();loadData();
        
        function showTab(id,btn){var cards=document.querySelectorAll('.card');for(var i=0;i<cards.length;i++)cards[i].style.display='none';var tabs=document.querySelectorAll('.tab');for(var i=0;i<tabs.length;i++)tabs[i].classList.remove('active');document.getElementById(id+'-tab').style.display='block';btn.classList.add('active');}
        function toggle(id){var el=document.getElementById(id);el.style.display=el.style.display==='none'?'flex':'none';}
        function selectMeal(meal,btn){currentMeal=meal;var btns=document.querySelectorAll('.meal-section .cat-filter-btn');for(var i=0;i<btns.length;i++)btns[i].classList.remove('active');btn.classList.add('active');foods=[];if(menuMeals[meal]&&menuMeals[meal].foods){for(var i=0;i<menuMeals[meal].foods.length;i++){var f=menuMeals[meal].foods[i];foods.push({emoji:f.emoji,name:f.name,cat:f.cat,cal:f.cal});}}render();}
        function add(emoji,name,cat,cal){foods.push({emoji:emoji,name:name,cat:cat,cal:cal});render();}
        function rm(i){foods.splice(i,1);render();}
        function render(){var disp=document.getElementById('foodDisp');var svg='';var cnt={};for(var i=0;i<foods.length;i++){var f=foods[i];if(!cnt[f.cat])cnt[f.cat]=0;var positions=pos[f.cat]||pos['×©×•××Ÿ'];var p=positions[cnt[f.cat]%positions.length];var ox=(Math.random()-0.5)*10;var oy=(Math.random()-0.5)*10;svg+='<text x="'+(p.x+ox)+'" y="'+(p.y+oy)+'" font-size="18" text-anchor="middle">'+f.emoji+'</text>';cnt[f.cat]++;}disp.innerHTML=svg;var list=document.getElementById('foodList');var html='';for(var i=0;i<foods.length;i++){html+='<div class="food-item"><span>'+foods[i].emoji+' '+foods[i].name+' ('+foods[i].cal+')</span><button class="rm-btn" onclick="rm('+i+')">âœ•</button></div>';}list.innerHTML=html;}
        function analyze(){if(!foods.length){alert('×™×© ×œ×”×•×¡×™×£ ×××›×œ×™×!');return;}var total=0;var vegCount=0;for(var i=0;i<foods.length;i++){total+=foods[i].cal;if(foods[i].cat==='×™×¨×§×•×ª')vegCount++;}var vegP=(vegCount/foods.length)*100;var txt=vegP>=40?'ğŸ‘‘ ××¦×•×™×Ÿ!':vegP>=25?'ğŸ‘ ×œ× ×¨×¢!':'ğŸ¥— ×›×“××™ ×œ×”×•×¡×™×£ ×™×¨×§×•×ª';document.getElementById('totalCal').textContent=total+' ×§×œ×•×¨×™×•×ª';document.getElementById('analysisTxt').textContent=txt;document.getElementById('analysis').style.display='block';}
        function clearAll(){foods=[];render();document.getElementById('analysis').style.display='none';}
        function saveMeal(){if(!foods.length){alert('×™×© ×œ×”×•×¡×™×£ ×××›×œ×™× ×§×•×“×!');return;}var total=0;var fc=[];for(var i=0;i<foods.length;i++){total+=foods[i].cal;fc.push({emoji:foods[i].emoji,name:foods[i].name,cat:foods[i].cat,cal:foods[i].cal});}menuMeals[currentMeal]={foods:fc,cal:total};renderMenu();saveData();alert('âœ“ × ×©××¨!');}
        function renderMenu(){var totalCal=0;var meals=['×‘×•×§×¨','×‘×™× ×™×™×1','×¦×”×¨×™×™×','×‘×™× ×™×™×2','×¢×¨×‘'];for(var i=0;i<meals.length;i++){var meal=meals[i];var el=document.getElementById('menu-'+meal);if(menuMeals[meal]&&menuMeals[meal].foods&&menuMeals[meal].foods.length>0){var names=[];for(var j=0;j<menuMeals[meal].foods.length;j++){names.push(menuMeals[meal].foods[j].emoji+' '+menuMeals[meal].foods[j].name);}el.innerHTML=names.join(', ')+'<br><strong>'+menuMeals[meal].cal+' ×§×œ×³</strong>';totalCal+=menuMeals[meal].cal;}else{el.innerHTML='×œ× × ×‘×—×¨×” ××¨×•×—×”';}}document.getElementById('menuTotalCal').textContent=totalCal;}
        function clearSingleMeal(meal){menuMeals[meal]={foods:[],cal:0};renderMenu();saveData();}
        function clearMenu(){menuMeals={'×‘×•×§×¨':{foods:[],cal:0},'×‘×™× ×™×™×1':{foods:[],cal:0},'×¦×”×¨×™×™×':{foods:[],cal:0},'×‘×™× ×™×™×2':{foods:[],cal:0},'×¢×¨×‘':{foods:[],cal:0}};renderMenu();saveData();}
        
        // Modal functions
        function openModal(title,body){document.getElementById('modalTitle').innerHTML=title;document.getElementById('modalBody').innerHTML=body;document.getElementById('modal').style.display='flex';}
        function closeModal(){document.getElementById('modal').style.display='none';}
        
        function showEmptyPlate(){
            var html='<div style="text-align:center;"><svg viewBox="0 0 260 260" style="width:280px;height:280px;max-width:100%;"><circle cx="130" cy="130" r="125" fill="#f5f5f5" stroke="#f48fb1" stroke-width="3"/><circle cx="130" cy="130" r="108" fill="#fafafa"/><line x1="130" y1="30" x2="130" y2="230" stroke="#e0e0e0" stroke-width="2" stroke-dasharray="5,3"/><line x1="130" y1="130" x2="230" y2="130" stroke="#e0e0e0" stroke-width="2" stroke-dasharray="5,3"/><path d="M 130 130 L 130 30 A 100 100 0 0 0 30 130 Z" fill="rgba(152,216,200,0.2)"/><path d="M 130 130 L 30 130 A 100 100 0 0 0 130 230 Z" fill="rgba(152,216,200,0.2)"/><path d="M 130 130 L 130 30 A 100 100 0 0 1 230 130 Z" fill="rgba(244,143,177,0.2)"/><path d="M 130 130 L 230 130 A 100 100 0 0 1 130 230 Z" fill="rgba(255,213,79,0.2)"/></svg><p style="margin-top:10px;">ğŸ¥¬ ×™×¨×§×•×ª 50% | ğŸ— ×—×œ×‘×•×Ÿ 25% | ğŸš ×¤×—××™××” 25%</p><p style="color:#888;font-size:0.85em;">×”×“×‘×™×§×• ××ª ×”××™×™×§×•× ×™× ×¢×œ ×”×¦×œ×—×ª!</p></div>';
            openModal('â­• ×¦×œ×—×ª ×¨×™×§×”',html);
        }
        
        function showIcons(){
            var icons=['ğŸ¥¬','ğŸ…','ğŸ¥’','ğŸ§…','ğŸ¥•','ğŸ¥¦','ğŸ«‘','ğŸ†','ğŸŒ±','ğŸ„','ğŸ—','ğŸ¦ƒ','ğŸ¥©','ğŸŸ','ğŸ ','ğŸ¥š','ğŸ§€','ğŸ§ˆ','ğŸ¥›','ğŸš','ğŸ','ğŸ¥”','ğŸ ','ğŸƒ','ğŸ','ğŸ¥™','ğŸ¥–','ğŸ«“','ğŸ¥‘','ğŸ¥„','ğŸ«’','ğŸ¥œ','ğŸ','ğŸŒ','ğŸ¥','ğŸ¥­','ğŸ‰','ğŸŠ','ğŸ“'];
            var html='<p style="text-align:center;color:#888;font-size:0.85em;margin-bottom:10px;">×’×–×¨×• ×•×”×“×‘×™×§×• ×¢×œ ×”×¦×œ×—×ª!</p><div style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center;">';
            for(var i=0;i<icons.length;i++){html+='<div style="font-size:2.2em;padding:8px;border:2px dashed #f48fb1;border-radius:8px;background:#fff5f7;">'+icons[i]+'</div>';}
            html+='</div>';
            openModal('ğŸ¨ ××™×™×§×•× ×™× ×œ×’×–×™×¨×”',html);
        }
        
        function showPlateForSave(){
            if(!foods.length){alert('×™×© ×œ×”×•×¡×™×£ ×××›×œ×™× ×§×•×“×!');return;}
            var html='<div style="background:#fff5f7;padding:15px;border-radius:10px;line-height:1.8;">';
            var total=0;
            for(var i=0;i<foods.length;i++){html+=foods[i].emoji+' '+foods[i].name+' - '+foods[i].cal+' ×§×œ×³<br>';total+=foods[i].cal;}
            html+='<hr style="border:1px dashed #f48fb1;margin:10px 0;"><strong>×¡×”×´×›: '+total+' ×§×œ×•×¨×™×•×ª</strong></div>';
            openModal('ğŸ½ï¸ ×”×¦×œ×—×ª ×©×œ×™',html);
        }
        
        function showMenuForSave(){
            var mealNames={'×‘×•×§×¨':'ğŸŒ… ×‘×•×§×¨','×‘×™× ×™×™×1':'ğŸ ×‘×™× ×™×™×','×¦×”×¨×™×™×':'â˜€ï¸ ×¦×”×¨×™×™×','×‘×™× ×™×™×2':'ğŸ¥œ ×‘×™× ×™×™×','×¢×¨×‘':'ğŸŒ™ ×¢×¨×‘'};
            var meals=['×‘×•×§×¨','×‘×™× ×™×™×1','×¦×”×¨×™×™×','×‘×™× ×™×™×2','×¢×¨×‘'];
            var html='<div style="background:#fff5f7;padding:15px;border-radius:10px;line-height:1.8;">';
            var total=0;
            for(var i=0;i<meals.length;i++){
                var m=meals[i];
                html+='<strong>'+mealNames[m]+'</strong><br>';
                if(menuMeals[m]&&menuMeals[m].foods&&menuMeals[m].foods.length>0){
                    for(var j=0;j<menuMeals[m].foods.length;j++){html+='  â€¢ '+menuMeals[m].foods[j].name+'<br>';}
                    html+='  <em>'+menuMeals[m].cal+' ×§×œ×³</em><br>';
                    total+=menuMeals[m].cal;
                }else{html+='  (×¨×™×§)<br>';}
                html+='<br>';
            }
            html+='<hr style="border:1px dashed #f48fb1;margin:10px 0;"><strong>×¡×”×´×› ×™×•××™: '+total+' ×§×œ×•×¨×™×•×ª</strong></div>';
            openModal('ğŸ“‹ ×”×ª×¤×¨×™×˜ ×”×™×•××™',html);
        }
        
        function showRecipesForSave(){
            if(!personalRecipes.length){alert('××™×Ÿ ××ª×›×•× ×™× ××™×©×™×™×');return;}
            var html='<div style="background:#fff5f7;padding:15px;border-radius:10px;line-height:1.8;">';
            for(var i=0;i<personalRecipes.length;i++){
                var r=personalRecipes[i];
                html+='<strong>ğŸ“Œ '+r.name+'</strong> ('+r.cal+' ×§×œ×³)<br>'+r.text+'<br><br>';
            }
            html+='</div>';
            openModal('ğŸ³ ×”××ª×›×•× ×™× ×©×œ×™',html);
        }
        
        function renderPersonalRecipes(){var c=document.getElementById('personalRecipes');if(!personalRecipes.length){c.innerHTML='';return;}var h='<h3 style="color:#f48fb1;margin:10px 0;">ğŸ“Œ ×”××ª×›×•× ×™× ×©×œ×™</h3>';for(var i=0;i<personalRecipes.length;i++){h+='<div class="personal-item"><div class="personal-item-content"><strong>'+personalRecipes[i].name+'</strong> ('+personalRecipes[i].cal+' ×§×œ×³)<br><small>'+personalRecipes[i].text.substring(0,60)+'...</small></div><button class="rm-btn" onclick="removeRecipe('+i+')">âœ•</button></div>';}c.innerHTML=h;}
        function addPersonalRecipe(){var n=document.getElementById('newRecipeName').value;var c=document.getElementById('newRecipeCat').value;var t=document.getElementById('newRecipeText').value;var cal=document.getElementById('newRecipeCal').value||'?';if(!n||!t){alert('×™×© ×œ××œ× ×©× ×•×ª×•×›×Ÿ');return;}personalRecipes.push({name:n,cat:c,text:t,cal:cal});renderPersonalRecipes();saveData();document.getElementById('newRecipeName').value='';document.getElementById('newRecipeText').value='';document.getElementById('newRecipeCal').value='';alert('âœ“ × ×©××¨!');}
        function removeRecipe(i){personalRecipes.splice(i,1);renderPersonalRecipes();saveData();}
        function addPersonalTip(){var t=document.getElementById('newTipTitle').value;var tx=document.getElementById('newTipText').value;if(!t||!tx){alert('×™×© ×œ××œ× ×›×•×ª×¨×ª ×•×ª×•×›×Ÿ');return;}personalTips.push({title:t,text:tx});renderPersonalTips();saveData();document.getElementById('newTipTitle').value='';document.getElementById('newTipText').value='';alert('âœ“ × ×©××¨!');}
        function renderPersonalTips(){var c=document.getElementById('personalTips');if(!personalTips.length){c.innerHTML='';return;}var h='<h3 style="color:#f48fb1;margin:10px 0;">ğŸ“Œ ×”×˜×™×¤×™× ×©×œ×™</h3>';for(var i=0;i<personalTips.length;i++){h+='<div class="tip"><div class="tip-title">ğŸ’¡ '+personalTips[i].title+'</div><div class="tip-text">'+personalTips[i].text+'</div><button class="rm-btn" style="position:absolute;top:5px;left:5px;" onclick="removeTip('+i+')">âœ•</button></div>';}c.innerHTML=h;}
        function removeTip(i){personalTips.splice(i,1);renderPersonalTips();saveData();}
        function saveJournalEntry(){var t=document.getElementById('newJournalEntry').value;if(!t||t.trim()===''){alert('×™×© ×œ×›×ª×•×‘ ××©×”×•');return;}var d=new Date().toLocaleDateString('he-IL');var tm=new Date().toLocaleTimeString('he-IL',{hour:'2-digit',minute:'2-digit'});journalEntries.unshift({date:d,time:tm,text:t});renderJournal();saveData();document.getElementById('newJournalEntry').value='';alert('âœ“ × ×©××¨!');}
        function addNewNote(){var c=document.getElementById('journalEntries');c.insertAdjacentHTML('afterbegin','<div class="memo-note" style="margin-top:10px;"><textarea placeholder="×¨×©×™××” ×—×“×©×”..."></textarea></div>');}
        function renderJournal(){var c=document.getElementById('journalEntries');if(!journalEntries.length){c.innerHTML='';return;}var h='<h3 style="color:#f48fb1;margin:10px 0;">ğŸ“Œ ×”×¨×©×™××•×ª ×©×œ×™</h3>';for(var i=0;i<journalEntries.length;i++){h+='<div class="memo-note"><div style="font-size:0.7em;color:#888;margin-bottom:5px;">ğŸ“… '+journalEntries[i].date+' '+journalEntries[i].time+'</div><div style="font-size:0.85em;white-space:pre-wrap;">'+journalEntries[i].text+'</div><button class="rm-btn" style="position:absolute;top:5px;left:5px;" onclick="removeJournal('+i+')">âœ•</button></div>';}c.innerHTML=h;}
        function removeJournal(i){journalEntries.splice(i,1);renderJournal();saveData();}
        function calcBMI(){var h=parseFloat(document.getElementById('height').value)/100;var w=parseFloat(document.getElementById('weight').value);if(h&&w){var bmi=(w/(h*h)).toFixed(1);var st=bmi<18.5?'×ª×ª ××©×§×œ':bmi<25?'×ª×§×™×Ÿ âœ“':bmi<30?'×¢×•×“×£':'×”×©×× ×”';document.getElementById('bmiVal').textContent=bmi;document.getElementById('bmiStat').textContent=st;document.getElementById('bmiRes').style.display='block';}}
        function calcWHR(){var waist=parseFloat(document.getElementById('waist').value);var hip=parseFloat(document.getElementById('hip').value);if(waist&&hip){var whr=(waist/hip).toFixed(2);var st=whr<0.80?'× ××•×š âœ“':whr<0.85?'×‘×™× ×•× ×™':'×’×‘×•×”';document.getElementById('waistD').textContent=waist;document.getElementById('hipD').textContent=hip;document.getElementById('whrVal').textContent=whr;document.getElementById('whrStat').textContent=st;document.getElementById('whrCircles').style.display='flex';document.getElementById('whrRes').style.display='block';}}
        function calcProg(){var s=parseFloat(document.getElementById('startW').value);var g=parseFloat(document.getElementById('goalW').value);if(s&&g&&s>g){var d=(s-g).toFixed(1);document.getElementById('diffVal').textContent=d;document.getElementById('diffRes').style.display='block';document.getElementById('chartBox').style.display='block';setTimeout(function(){drawChart(s,g);},100);}}
        function clearChart(){document.getElementById('chartBox').style.display='none';document.getElementById('diffRes').style.display='none';document.getElementById('startW').value='';document.getElementById('goalW').value='';}
        function drawChart(start,goal){var canvas=document.getElementById('chart');var ctx=canvas.getContext('2d');canvas.width=canvas.offsetWidth*2;canvas.height=360;var diff=start-goal;var weeks=Math.ceil(diff/0.75);var months=Math.ceil(weeks/4.3);var w=canvas.width;var h=canvas.height;var pL=70,pR=30,pT=40,pB=60;ctx.clearRect(0,0,w,h);ctx.fillStyle='#fff5f7';ctx.fillRect(0,0,w,h);ctx.strokeStyle='#ffe4e9';ctx.lineWidth=1;for(var i=0;i<=5;i++){var y=pT+(h-pT-pB)*i/5;ctx.beginPath();ctx.moveTo(pL,y);ctx.lineTo(w-pR,y);ctx.stroke();}ctx.strokeStyle='#f48fb1';ctx.lineWidth=2;ctx.beginPath();ctx.moveTo(pL,pT);ctx.lineTo(pL,h-pB);ctx.lineTo(w-pR,h-pB);ctx.stroke();var pts=[];var np=Math.min(months+1,13);for(var i=0;i<np;i++){var wt=start-(diff*i/months);if(wt<goal)wt=goal;var x=pL+((w-pL-pR)*i/(np-1));var y=pT+(h-pT-pB)*(start-wt)/diff;pts.push({x:x,y:y,wt:wt.toFixed(1),m:i});}ctx.beginPath();ctx.moveTo(pts[0].x,h-pB);for(var i=0;i<pts.length;i++)ctx.lineTo(pts[i].x,pts[i].y);ctx.lineTo(pts[pts.length-1].x,h-pB);ctx.closePath();var grad=ctx.createLinearGradient(0,pT,0,h-pB);grad.addColorStop(0,'rgba(244,143,177,0.5)');grad.addColorStop(1,'rgba(244,143,177,0.1)');ctx.fillStyle=grad;ctx.fill();ctx.beginPath();ctx.moveTo(pts[0].x,pts[0].y);for(var i=1;i<pts.length;i++)ctx.lineTo(pts[i].x,pts[i].y);ctx.strokeStyle='#f48fb1';ctx.lineWidth=4;ctx.stroke();for(var i=0;i<pts.length;i++){ctx.fillStyle='#ec407a';ctx.beginPath();ctx.arc(pts[i].x,pts[i].y,8,0,Math.PI*2);ctx.fill();ctx.fillStyle='white';ctx.beginPath();ctx.arc(pts[i].x,pts[i].y,4,0,Math.PI*2);ctx.fill();}ctx.fillStyle='#666';ctx.font='22px Heebo';ctx.textAlign='center';for(var i=0;i<pts.length;i++){if(i===0||i===pts.length-1||i%2===0)ctx.fillText('×—×•×“×© '+pts[i].m,pts[i].x,h-20);}ctx.textAlign='right';for(var i=0;i<=4;i++){var wt=start-(diff*i/4);var y=pT+(h-pT-pB)*i/4;ctx.fillText(wt.toFixed(0)+' ×§×´×’',pL-10,y+7);}ctx.textAlign='center';ctx.fillStyle='#f48fb1';ctx.font='bold 20px Heebo';ctx.fillText(pts[0].wt+' ×§×´×’',pts[0].x,pts[0].y-18);ctx.fillText(pts[pts.length-1].wt+' ×§×´×’',pts[pts.length-1].x,pts[pts.length-1].y-18);document.getElementById('timeline').innerHTML='â±ï¸ ×ª×—×–×™×ª: ×›-'+weeks+' ×©×‘×•×¢×•×ª ('+months+' ×—×•×“×©×™×) ×œ×”×’×¢×” ×œ×™×¢×“';}
        function prepareShare(type){
            var text='ğŸ¥— ×”×¨×–-×™×”\n\n';
            if(type==='plate'){
                if(!foods.length){alert('××™×Ÿ ×××›×œ×™×!');return;}
                text+='ğŸ½ï¸ ×”×¦×œ×—×ª ×©×œ×™:\n';
                var total=0;
                for(var i=0;i<foods.length;i++){text+=foods[i].emoji+' '+foods[i].name+' ('+foods[i].cal+')\n';total+=foods[i].cal;}
                text+='\n×¡×”×´×›: '+total+' ×§×œ×•×¨×™×•×ª';
            }else if(type==='menu'){
                text+='ğŸ“‹ ×”×ª×¤×¨×™×˜ ×”×™×•××™:\n\n';
                var mealNames={'×‘×•×§×¨':'ğŸŒ… ×‘×•×§×¨','×‘×™× ×™×™×1':'ğŸ ×‘×™× ×™×™×','×¦×”×¨×™×™×':'â˜€ï¸ ×¦×”×¨×™×™×','×‘×™× ×™×™×2':'ğŸ¥œ ×‘×™× ×™×™×','×¢×¨×‘':'ğŸŒ™ ×¢×¨×‘'};
                var meals=['×‘×•×§×¨','×‘×™× ×™×™×1','×¦×”×¨×™×™×','×‘×™× ×™×™×2','×¢×¨×‘'];
                var total=0;
                for(var i=0;i<meals.length;i++){var m=meals[i];if(menuMeals[m]&&menuMeals[m].foods&&menuMeals[m].foods.length>0){var names=[];for(var j=0;j<menuMeals[m].foods.length;j++){names.push(menuMeals[m].foods[j].name);}text+=mealNames[m]+': '+names.join(', ')+' ('+menuMeals[m].cal+')\n';total+=menuMeals[m].cal;}}
                text+='\n×¡×”×´×›: '+total+' ×§×œ×•×¨×™×•×ª';
            }else if(type==='recipes'){
                if(!personalRecipes.length){alert('××™×Ÿ ××ª×›×•× ×™×!');return;}
                text+='ğŸ³ ×”××ª×›×•× ×™× ×©×œ×™:\n\n';
                for(var i=0;i<personalRecipes.length;i++){text+=personalRecipes[i].name+' ('+personalRecipes[i].cal+')\n';}
            }
            
            if(navigator.share){
                navigator.share({
                    title: '×”×¨×–-×™×”',
                    text: text
                });
            }else{
                navigator.clipboard.writeText(text);
                alert('×”×˜×§×¡×˜ ×”×•×¢×ª×§ ×œ×œ×•×—!');
            }
        }
        
        function setMealReminder(){
            var html='<div style="text-align:center;">';
            html+='<p style="margin-bottom:15px;font-weight:600;">â° ×‘×—×™×¨×ª ×ª×–×›×•×¨×•×ª</p>';
            html+='<div style="background:#fff5f7;padding:10px;border-radius:10px;margin-bottom:10px;">';
            html+='<p style="font-weight:600;color:#f48fb1;margin-bottom:8px;">ğŸ½ï¸ ××¨×•×—×•×ª</p>';
            html+='<div style="display:flex;flex-wrap:wrap;gap:5px;justify-content:center;">';
            html+='<button class="btn btn-small" onclick="scheduleReminder(\'×‘×•×§×¨\',\'07:30\')">ğŸŒ… ×‘×•×§×¨ 7:30</button>';
            html+='<button class="btn btn-small" onclick="scheduleReminder(\'×‘×™× ×™×™× ×‘×•×§×¨\',\'10:00\')">ğŸ ×‘×™× ×™×™× 10:00</button>';
            html+='<button class="btn btn-small" onclick="scheduleReminder(\'×¦×”×¨×™×™×\',\'13:00\')">â˜€ï¸ ×¦×”×¨×™×™× 13:00</button>';
            html+='<button class="btn btn-small" onclick="scheduleReminder(\'×‘×™× ×™×™× ××—×”×´×¦\',\'16:00\')">ğŸ¥œ ×‘×™× ×™×™× 16:00</button>';
            html+='<button class="btn btn-small" onclick="scheduleReminder(\'×¢×¨×‘\',\'19:00\')">ğŸŒ™ ×¢×¨×‘ 19:00</button>';
            html+='</div></div>';
            html+='<div style="background:#e3f2fd;padding:10px;border-radius:10px;margin-bottom:10px;">';
            html+='<p style="font-weight:600;color:#1976d2;margin-bottom:8px;">ğŸ’§ ×©×ª×™×™×”</p>';
            html+='<div style="display:flex;flex-wrap:wrap;gap:5px;justify-content:center;">';
            html+='<button class="btn btn-small btn-outline" onclick="scheduleReminder(\'×©×ª×™×™×”\',\'09:00\')" style="border-color:#64b5f6;color:#1976d2;">ğŸ’§ 9:00</button>';
            html+='<button class="btn btn-small btn-outline" onclick="scheduleReminder(\'×©×ª×™×™×”\',\'11:00\')" style="border-color:#64b5f6;color:#1976d2;">ğŸ’§ 11:00</button>';
            html+='<button class="btn btn-small btn-outline" onclick="scheduleReminder(\'×©×ª×™×™×”\',\'14:00\')" style="border-color:#64b5f6;color:#1976d2;">ğŸ’§ 14:00</button>';
            html+='<button class="btn btn-small btn-outline" onclick="scheduleReminder(\'×©×ª×™×™×”\',\'17:00\')" style="border-color:#64b5f6;color:#1976d2;">ğŸ’§ 17:00</button>';
            html+='<button class="btn btn-small btn-outline" onclick="scheduleReminder(\'×©×ª×™×™×”\',\'20:00\')" style="border-color:#64b5f6;color:#1976d2;">ğŸ’§ 20:00</button>';
            html+='</div></div>';
            html+='<div style="background:#fff9c4;padding:10px;border-radius:10px;">';
            html+='<p style="font-weight:600;color:#f57f17;margin-bottom:8px;">â±ï¸ ×ª×–×›×•×¨×ª ××•×ª×××ª ××™×©×™×ª</p>';
            html+='<input type="time" id="customTime" style="padding:8px;border:2px solid #ffd54f;border-radius:8px;font-size:1em;margin-left:5px;">';
            html+='<input type="text" id="customText" placeholder="×˜×§×¡×˜ ×”×ª×–×›×•×¨×ª" style="padding:8px;border:2px solid #ffd54f;border-radius:8px;font-size:0.9em;width:120px;margin-top:5px;">';
            html+='<button class="btn btn-small" onclick="scheduleCustomReminder()" style="background:#ffd54f;color:#333;margin-top:5px;">×”×’×“×¨×”</button>';
            html+='</div>';
            html+='<p style="font-size:0.75em;color:#888;margin-top:10px;">ğŸ“± ×™×© ×œ×”×©××™×¨ ××ª ×”×“×£ ×¤×ª×•×— ×œ×§×‘×œ×ª ×ª×–×›×•×¨×•×ª</p>';
            html+='</div>';
            openModal('â° ×ª×–×›×•×¨×•×ª',html);
        }
        
        function scheduleReminder(type,timeStr){
            var parts=timeStr.split(':');
            var h=parseInt(parts[0]);
            var m=parseInt(parts[1]);
            var now=new Date();
            var reminder=new Date();
            reminder.setHours(h,m,0,0);
            if(reminder<=now)reminder.setDate(reminder.getDate()+1);
            var delay=reminder.getTime()-now.getTime();
            var msg=type==='×©×ª×™×™×”'?'ğŸ’§ ×”×’×™×¢ ×”×–××Ÿ ×œ×©×ª×•×ª ×›×•×¡ ××™×!':'ğŸ½ï¸ ×”×’×™×¢ ×”×–××Ÿ ×œ××¨×•×—×ª '+type+'!';
            setTimeout(function(){
                alert(msg);
                if('vibrate' in navigator)navigator.vibrate([200,100,200]);
            },delay);
            var timeDisplay=reminder.toLocaleTimeString('he-IL',{hour:'2-digit',minute:'2-digit'});
            alert('âœ“ ×ª×–×›×•×¨×ª × ×§×‘×¢×”!\n\n'+msg+'\n×‘×©×¢×”: '+timeDisplay);
        }
        
        function scheduleCustomReminder(){
            var timeInput=document.getElementById('customTime').value;
            var textInput=document.getElementById('customText').value||'×ª×–×›×•×¨×ª';
            if(!timeInput){alert('×™×© ×œ×‘×—×•×¨ ×©×¢×”');return;}
            var parts=timeInput.split(':');
            var h=parseInt(parts[0]);
            var m=parseInt(parts[1]);
            var now=new Date();
            var reminder=new Date();
            reminder.setHours(h,m,0,0);
            if(reminder<=now)reminder.setDate(reminder.getDate()+1);
            var delay=reminder.getTime()-now.getTime();
            setTimeout(function(){
                alert('â° '+textInput);
                if('vibrate' in navigator)navigator.vibrate([200,100,200]);
            },delay);
            var timeDisplay=reminder.toLocaleTimeString('he-IL',{hour:'2-digit',minute:'2-digit'});
            alert('âœ“ ×ª×–×›×•×¨×ª × ×§×‘×¢×”!\n\nâ° '+textInput+'\n×‘×©×¢×”: '+timeDisplay);
            closeModal();
        }
        
        function exportToExcel(){
            var mealNames={'×‘×•×§×¨':'××¨×•×—×ª ×‘×•×§×¨','×‘×™× ×™×™×1':'××¨×•×—×ª ×‘×™× ×™×™× (×‘×•×§×¨)','×¦×”×¨×™×™×':'××¨×•×—×ª ×¦×”×¨×™×™×','×‘×™× ×™×™×2':'××¨×•×—×ª ×‘×™× ×™×™× (××—×”×´×¦)','×¢×¨×‘':'××¨×•×—×ª ×¢×¨×‘'};
            var meals=['×‘×•×§×¨','×‘×™× ×™×™×1','×¦×”×¨×™×™×','×‘×™× ×™×™×2','×¢×¨×‘'];
            var csv='\ufeff××¨×•×—×”,×××›×œ×™×,×§×œ×•×¨×™×•×ª\n';
            var total=0;
            for(var i=0;i<meals.length;i++){var m=meals[i];var md=menuMeals[m];if(md&&md.foods&&md.foods.length>0){var names=[];for(var j=0;j<md.foods.length;j++){names.push(md.foods[j].name);}csv+=mealNames[m]+',"'+names.join(', ')+'",'+md.cal+'\n';total+=md.cal;}else{csv+=mealNames[m]+',-,0\n';}}
            csv+='×¡×”×´×›,-,'+total+'\n';
            var blob=new Blob([csv],{type:'text/csv;charset=utf-8;'});
            var link=document.createElement('a');link.href=URL.createObjectURL(blob);link.download='×ª×¤×¨×™×˜_×”×¨×–-×™×”.csv';link.click();
        }
        
        function filterRecipes(cat,btn){var btns=document.querySelectorAll('.cat-filter-btn');for(var i=0;i<btns.length;i++)btns[i].classList.remove('active');btn.classList.add('active');var recipes=document.querySelectorAll('.recipe');for(var i=0;i<recipes.length;i++){if(cat==='all'||recipes[i].dataset.cat===cat){recipes[i].style.display='block';}else{recipes[i].style.display='none';}}}
    </script>
</body>
</html>
